"use strict";(self.webpackChunkxpic=self.webpackChunkxpic||[]).push([[620],{3620:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r,i,l=t(6515),s=t(7186),a=t(3208),d=t(9969),u=t(4376),c=t(1358),h=t(6776),o=t(9023),x=t(32),f=t(5751),p=t(5413),g=t(2791),j=t(4489),m=t(184),v=d.Z.Dragger,b=f.ZP.div(r||(r=(0,s.Z)(["\n  margin-top: 20px;\n  border: 1px dashed #6ebcfc;\n  background: #fafafa;\n  padding: 20px;\n\n  > h2 {\n    text-align: center;\n  }\n\n  > dl {\n    .filename {\n      border: 1px solid #d9d9d9;\n      width: 100%;\n      padding: 4px;\n\n      &:focus {\n        outline: none;\n      }\n    }\n\n    > dt {\n      padding-bottom: 6px;\n      font-weight: 600;\n    }\n\n    img {\n      max-height: 280px;\n      max-width: 100%;\n      object-fit: contain;\n    }\n\n    .resize {\n      > input {\n        width: 100px;\n        border: 1px solid #d9d9d9;\n        padding: 4px;\n\n        &:focus {\n          outline: none;\n        }\n      }\n    }\n  }\n"]))),w=f.ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  justify-content: flex-end;\n"]))),y=(0,o.Pi)((function(){var e=(0,a.o)().ImageStore,n=(0,g.useRef)(),t=(0,g.useRef)(),r=(0,g.useRef)(),i=(0,g.useRef)(),s=(0,x.hN)((function(){return{width:"",setWidth:function(){s.width=r.current.value},get widthStr(){return s.width?"/w/".concat(s.width):""},height:"",setHeight:function(){s.height=i.current.value},get heightStr(){return s.height?"/h/".concat(s.height):""},get fullStr(){return e.serverFile.attributes.url.attributes.url+"?imageView2/0"+s.widthStr+s.heightStr}}}));(0,g.useEffect)((function(){return function(){return e.resetServerFile()}}),[]);var d={showUploadList:!1,beforeUpload:function(n){return e.setFile(n),e.setFilename(n.name),/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(n.type)?n.size>2097152?(u.ZP.error("\u56fe\u7247\u6700\u5927\u652f\u63012M"),!1):(e.upload().then((function(e){return console.dir(e)})).catch((function(e){console.error(e)})),!1):(u.ZP.error("\u4ec5\u652f\u6301 png/svg/jpg/jpeg/gif \u683c\u5f0f\u7684\u56fe\u7247"),!1)}};return(0,m.jsxs)(m.Fragment,{children:[e.isUploading?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.Z,{}),(0,m.jsx)("p",{style:{textAlign:"center",fontSize:"18px",color:"#40a9ff"},children:"\u52aa\u529b\u4e0a\u4f20\u4e2d..."})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(v,(0,l.Z)((0,l.Z)({},d),{},{children:[(0,m.jsx)("p",{className:"ant-upload-drag-icon",children:(0,m.jsx)(h.Z,{})}),(0,m.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247\u5230\u8fd9\u91cc\u4e0a\u4f20"}),(0,m.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301 png/svg/gif/jpg/jpeg \u683c\u5f0f, \u56fe\u7247\u6700\u59272M"})]}))}),(0,m.jsx)("div",{children:e.serverFile?(0,m.jsxs)(b,{children:[(0,m.jsx)("h2",{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,m.jsxs)("dl",{children:[(0,m.jsx)("dt",{children:"\u7ebf\u4e0a\u5730\u5740"}),(0,m.jsxs)("dd",{children:[(0,m.jsx)("input",{type:"text",className:"filename",value:e.serverFile.attributes.url.attributes.url,ref:n,readOnly:!0}),(0,m.jsxs)(w,{children:[(0,m.jsx)(c.Z,{type:"default",size:"small",onClick:function(){return(0,j.r0)(n.current)},children:"\u590d\u5236"}),(0,m.jsx)(c.Z,{type:"default",size:"small",children:(0,m.jsx)("a",{target:"_blank",href:e.serverFile.attributes.url.attributes.url,rel:"noreferrer",children:"\u6253\u5f00"})})]})]}),(0,m.jsx)("dt",{children:"\u6587\u4ef6\u540d"}),(0,m.jsx)("dd",{children:(0,m.jsx)("input",{className:"filename",type:"text",value:e.filename,readOnly:!0})}),(0,m.jsx)("dt",{children:"\u56fe\u7247\u9884\u89c8"}),(0,m.jsx)("dd",{children:(0,m.jsx)("img",{src:e.serverFile.attributes.url.attributes.url,alt:""})}),(0,m.jsx)("dt",{children:"\u81ea\u5b9a\u4e49\u5c3a\u5bf8"}),(0,m.jsxs)("dd",{className:"resize",children:[(0,m.jsx)("input",{type:"text",placeholder:" \u5bbd\u5ea6(\u53ef\u9009)",value:s.width,ref:r,onChange:function(e){(""===e.target.value||/^[1-9][0-9]*$/.test(e.target.value))&&s.setWidth()}})," ","-"," ",(0,m.jsx)("input",{type:"text",placeholder:" \u9ad8\u5ea6(\u53ef\u9009)",ref:i,value:s.height,onChange:function(e){(""===e.target.value||/^[1-9][0-9]*$/.test(e.target.value))&&s.setHeight()}})]}),(0,m.jsxs)("dd",{children:[(0,m.jsx)("input",{type:"text",className:"filename",readOnly:!0,ref:t,value:s.fullStr}),(0,m.jsxs)(w,{children:[(0,m.jsx)(c.Z,{type:"default",size:"small",onClick:function(){(0,j.r0)(t.current)},children:"\u590d\u5236"}),(0,m.jsx)(c.Z,{type:"default",size:"small",children:(0,m.jsx)("a",{target:"_blank",href:s.fullStr,rel:"noreferrer",children:"\u6253\u5f00"})})]})]})]})]}):""})]})})),Z=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{children:(0,m.jsx)(y,{})})})}}}]);
//# sourceMappingURL=620.740d4e3a.chunk.js.map